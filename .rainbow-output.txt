
> pelangi-mcp-server@1.0.0 dev
> tsx watch src/index.ts

[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:40660) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[Hot Reload] Enabled - watching for changes...
Pelangi MCP Server running on http://0.0.0.0:3002
MCP endpoint: http://0.0.0.0:3002/mcp
Health check: http://0.0.0.0:3002/health
API URL: http://localhost:5000
PelangiManager API reachable
[DB] âœ… Database connection established (4126ms)
[Feedback] âœ… Settings loaded from database
[Feedback Settings] âœ… Initialized defaults
[Admin Notifications] âœ… Initialized defaults
[Baileys:default] Loaded 7 LIDâ†’phone mappings from auth state
[BaileysSupervisor] WhatsApp (Baileys) initializing...
[32m[07:17:53] [AdminNotifications] âœ… Initialized[39m
[Assistant] WhatsApp not connected yet â€” handler will be registered for when it connects
[ConfigStore] âœ… All config files loaded and validated
[AI] Provider "Google Gemini 2.5 Flash" (priority 0) â€” ready
[AI] Provider "Ollama GPT-OSS 20B" (priority 1) â€” ready
[AI] Provider "Groq Llama 3.3 70B" (priority 2) â€” ready
[AI] Provider "Groq Llama 3.1 8B Instant" (priority 3) â€” ready
[AI] Provider "Ollama Gemini 3 Flash" (priority 9) â€” ready
[KnowledgeBase] Loaded 33 KB files from .rainbow-kb/
[KnowledgeBase] Watching .rainbow-kb/ for changes
[KnowledgeBase] Watching .rainbow-kb/memory/ for changes
[StatePersistence] Database available â€” state will be persisted
[Intents] Loaded 18 emergency patterns from regex-patterns.json (by language)
[Intents] Fuzzy matcher initialized with 81 keyword groups
[IntentConfig] Built threshold maps: 35 intents, 0 T2 overrides, 0 T3 overrides
[Semantic] Initializing embedding model...
[Intents] Hybrid mode: Emergency â†’ Fuzzy â†’ Semantic â†’ LLM
[StatePersistence] Loaded 0 active conversation state(s) from DB
[WhatsAppManager] Message handler registered
[Assistant] WhatsApp AI Assistant ready
[BaileysSupervisor] Pelangi Assistant initialized â€” WhatsApp auto-reply active
Daily report scheduled for 11:30 AM MYT
[Semantic] Model loaded in 672ms
[Semantic] Computing intent embeddings...
[Semantic] Computed 27 intent embeddings in 4847ms
[Intents] Semantic matcher ready: 27 intents, 838 examples
API call failed: GET /api/settings Request failed with status code 401
[Knowledge] Failed to refresh settings cache: API Error: No token provided (http://localhost:5000/api/settings â†’ 401 Unauthorized)
{"level":30,"time":"2026-02-14T23:17:59.013Z","pid":40660,"hostname":"DESKTOP-I3D1826","class":"baileys","browser":["PelangiManager","Chrome","1.0.0"],"helloMsg":{"clientHello":{"ephemeral":"r7uWzMZFHkDX0Z5TmG0BQEdb96dvMI4AAOt4NNBtvAU="}},"msg":"connected to WA"}
{"level":30,"time":"2026-02-14T23:17:59.267Z","pid":40660,"hostname":"DESKTOP-I3D1826","class":"baileys","node":{"username":"60103084289","passive":true,"userAgent":{"platform":"WEB","appVersion":{"primary":2,"secondary":3000,"tertiary":1027934701},"mcc":"000","mnc":"000","osVersion":"0.1","device":"Desktop","osBuildNumber":"0.1","releaseChannel":"RELEASE","localeLanguageIso6391":"en","localeCountryIso31661Alpha2":"US"},"webInfo":{"webSubPlatform":"WEB_BROWSER"},"connectType":"WIFI_UNKNOWN","connectReason":"USER_ACTIVATED","device":2,"pull":true,"lidDbMigrated":false},"msg":"logging in..."}
[AdminNotifier] Failed to send startup notification: No WhatsApp instance connected. Check status with pelangi_whatsapp_status.
{"level":30,"time":"2026-02-14T23:18:00.236Z","pid":40660,"hostname":"DESKTOP-I3D1826","class":"baileys","msg":"808 pre-keys found on server"}
{"level":30,"time":"2026-02-14T23:18:00.236Z","pid":40660,"hostname":"DESKTOP-I3D1826","class":"baileys","msg":"Current prekey ID: 812, exists in storage: true"}
{"level":30,"time":"2026-02-14T23:18:00.236Z","pid":40660,"hostname":"DESKTOP-I3D1826","class":"baileys","msg":"PreKey validation passed - Server: 808, Current prekey 812 exists"}
{"level":30,"time":"2026-02-14T23:18:00.625Z","pid":40660,"hostname":"DESKTOP-I3D1826","class":"baileys","msg":"offline preview received"}
{"level":30,"time":"2026-02-14T23:18:00.634Z","pid":40660,"hostname":"DESKTOP-I3D1826","class":"baileys","msg":"handled 3 offline messages/notifications"}
{"level":30,"time":"2026-02-14T23:18:00.635Z","pid":40660,"hostname":"DESKTOP-I3D1826","class":"baileys","msg":"Connection is now AwaitingInitialSync, buffering events"}
{"level":30,"time":"2026-02-14T23:18:00.635Z","pid":40660,"hostname":"DESKTOP-I3D1826","class":"baileys","msg":"History sync is enabled, awaiting notification with a 20s timeout."}
{"level":30,"time":"2026-02-14T23:18:01.017Z","pid":40660,"hostname":"DESKTOP-I3D1826","class":"baileys","msg":"opened connection to WA"}
[Baileys:default] Connected: Pelangi Capsule Hostel (60103084289)
{"level":30,"time":"2026-02-14T23:18:01.033Z","pid":40660,"hostname":"DESKTOP-I3D1826","class":"baileys","myPN":"60103084289:2@s.whatsapp.net","myLID":"223008241221697:2@lid","msg":"Own LID session created successfully"}
{"level":40,"time":"2026-02-14T23:18:20.641Z","pid":40660,"hostname":"DESKTOP-I3D1826","class":"baileys","msg":"Timeout in AwaitingInitialSync, forcing state to Online and flushing buffer"}
[Hot Reload] Client connected
[AI] âœ“ Google Gemini 2.5 Flash responded (1233ms, 2 chars)
[AI] âœ“ Ollama GPT-OSS 20B responded (2486ms, 2 chars)
[AI] âœ“ Groq Llama 3.3 70B responded (219ms, 2 chars)
[AI] âœ“ Groq Llama 3.1 8B Instant responded (143ms, 2 chars)
[AI] âœ“ Ollama Gemini 3 Flash responded (1943ms, 2 chars)
[Hot Reload] File changed: C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\public\js\modules\chat-send.js
[Hot Reload] Client disconnected
[Hot Reload] Client connected
[AI] âœ“ Google Gemini 2.5 Flash responded (1114ms, 2 chars)
[AI] âœ“ Ollama GPT-OSS 20B responded (1323ms, 2 chars)
[AI] âœ“ Groq Llama 3.3 70B responded (336ms, 2 chars)
[AI] âœ“ Groq Llama 3.1 8B Instant responded (147ms, 2 chars)
[AI] âœ“ Ollama Gemini 3 Flash responded (1766ms, 2 chars)
[Hot Reload] File changed: C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\public\js\core\module-registry.js
[Hot Reload] Client disconnected
[Hot Reload] Client connected
[AI] âœ“ Google Gemini 2.5 Flash responded (1140ms, 2 chars)
[AI] âœ“ Ollama GPT-OSS 20B responded (1018ms, 2 chars)
[AI] âœ“ Groq Llama 3.3 70B responded (186ms, 2 chars)
[AI] âœ“ Groq Llama 3.1 8B Instant responded (147ms, 2 chars)
[AI] âœ“ Ollama Gemini 3 Flash responded (1852ms, 2 chars)
[Hot Reload] Client connected
[AI] âœ“ Google Gemini 2.5 Flash responded (864ms, 2 chars)
[AI] âœ“ Google Gemini 2.5 Flash responded (954ms, 2 chars)
[AI] âœ“ Groq Llama 3.3 70B responded (195ms, 2 chars)
[AI] âœ“ Groq Llama 3.3 70B responded (182ms, 2 chars)
[AI] âœ“ Ollama GPT-OSS 20B responded (1015ms, 2 chars)
[AI] âœ“ Ollama GPT-OSS 20B responded (1190ms, 2 chars)
[AI] âœ“ Groq Llama 3.1 8B Instant responded (148ms, 2 chars)
[AI] âœ“ Groq Llama 3.1 8B Instant responded (146ms, 3 chars)
[AI] âœ“ Ollama DeepSeek V3.2 responded (2402ms, 2 chars)
[AI] âœ“ Ollama Qwen3 80B responded (2978ms, 2 chars)
[LatencyTest] Failed for ollama-qwen3-80b: Error: Ollama Qwen3 80B: message.content is empty after trim
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for openrouter-qwen-32b: Error: Qwen 2.5 32B (Free) 400: {"error":{"message":"qwen/qwen-2.5-32b-instruct is not a valid model ID","code":400},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for openrouter-qwen-32b: Error: Qwen 2.5 32B (Free) 400: {"error":{"message":"qwen/qwen-2.5-32b-instruct is not a valid model ID","code":400},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for openrouter-gemma-9b: Error: Google Gemma 2 9B (Free) 404: {"error":{"message":"No endpoints found for google/gemma-2-9b-it:free.","code":404},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for openrouter-gemma-9b: Error: Google Gemma 2 9B (Free) 404: {"error":{"message":"No endpoints found for google/gemma-2-9b-it:free.","code":404},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for openrouter-llama-8b: Error: Meta Llama 3.1 8B (Free) 404: {"error":{"message":"No endpoints found for meta-llama/llama-3.1-8b-instruct:free.","code":404},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for openrouter-llama-8b: Error: Meta Llama 3.1 8B (Free) 404: {"error":{"message":"No endpoints found for meta-llama/llama-3.1-8b-instruct:free.","code":404},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for openrouter-mistral-7b: Error: Mistral 7B (Free) 404: {"error":{"message":"No endpoints found for mistralai/mistral-7b-instruct:free.","code":404},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for openrouter-mistral-7b: Error: Mistral 7B (Free) 404: {"error":{"message":"No endpoints found for mistralai/mistral-7b-instruct:free.","code":404},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for openrouter-phi-3: Error: Microsoft Phi-3 Medium (Free) 404: {"error":{"message":"No endpoints found for microsoft/phi-3-medium-128k-instruct:free.","code":404},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for openrouter-phi-3: Error: Microsoft Phi-3 Medium (Free) 404: {"error":{"message":"No endpoints found for microsoft/phi-3-medium-128k-instruct:free.","code":404},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[AI] âœ“ Ollama Gemini 3 Flash responded (3924ms, 2 chars)
[AI] âœ“ Moonshot Kimi 2.5 responded (3386ms, 2 chars)
[LatencyTest] Failed for moonshot-kimi: Error: Moonshot Kimi 2.5: message.content is empty after trim
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[AI] âœ“ Ollama Gemini 3 Flash responded (5971ms, 2 chars)
[AI] âœ“ Ollama DeepSeek V3.2 responded (9423ms, 2 chars)
[AI] âœ“ Ollama Gemini 3 Flash responded (1785ms, 2 chars)
[AI] âœ“ Ollama Gemini 3 Flash responded (1851ms, 2 chars)
[AI] âœ“ Ollama Gemini 3 Flash responded (1837ms, 2 chars)
[AI] âœ“ Ollama Gemini 3 Flash responded (1861ms, 2 chars)
[Sentiment] Config reloaded: threshold=2, cooldown=30min
[AI] Settings reloaded â€” providers refreshed
[RateLimiter] Staff phones reloaded
[Router] Config reloaded
[Hot Reload] File changed: C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\settings.json
[Hot Reload] Client disconnected
[Hot Reload] Client disconnected
[Hot Reload] Client connected
[Hot Reload] Client connected
[AI] âœ“ Google Gemini 2.5 Flash responded (1082ms, 2 chars)
[AI] âœ“ Google Gemini 2.5 Flash responded (1132ms, 2 chars)
[AI] âœ“ Ollama GPT-OSS 20B responded (1022ms, 2 chars)
[AI] âœ“ Groq Llama 3.3 70B responded (251ms, 2 chars)
[AI] âœ“ Groq Llama 3.1 8B Instant responded (144ms, 2 chars)
[AI] âœ“ Ollama Gemini 3 Flash responded (1625ms, 2 chars)
[Hot Reload] Client disconnected
[Hot Reload] Client connected
[AI] âœ“ Google Gemini 2.5 Flash responded (1117ms, 2 chars)
[AI] âœ“ Google Gemini 2.5 Flash responded (1205ms, 2 chars)
[AI] âœ“ Groq Llama 3.3 70B responded (188ms, 2 chars)
[AI] âœ“ Ollama GPT-OSS 20B responded (817ms, 2 chars)
[AI] âœ“ Groq Llama 3.3 70B responded (212ms, 2 chars)
[AI] âœ“ Ollama GPT-OSS 20B responded (945ms, 2 chars)
[AI] âœ“ Groq Llama 3.1 8B Instant responded (142ms, 3 chars)
[AI] âœ“ Groq Llama 3.1 8B Instant responded (142ms, 2 chars)
[AI] âœ“ Ollama DeepSeek V3.2 responded (2247ms, 2 chars)
[AI] âœ“ Ollama DeepSeek V3.2 responded (2657ms, 2 chars)
[LatencyTest] Failed for ollama-qwen3-80b: Error: Ollama Qwen3 80B: message.content is empty after trim
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for ollama-qwen3-80b: Error: Ollama Qwen3 80B: message.content is empty after trim
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for openrouter-qwen-32b: Error: Qwen 2.5 32B (Free) 400: {"error":{"message":"qwen/qwen-2.5-32b-instruct is not a valid model ID","code":400},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for openrouter-gemma-9b: Error: Google Gemma 2 9B (Free) 404: {"error":{"message":"No endpoints found for google/gemma-2-9b-it:free.","code":404},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for openrouter-gemma-9b: Error: Google Gemma 2 9B (Free) 404: {"error":{"message":"No endpoints found for google/gemma-2-9b-it:free.","code":404},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for openrouter-qwen-32b: Error: Qwen 2.5 32B (Free) 400: {"error":{"message":"qwen/qwen-2.5-32b-instruct is not a valid model ID","code":400},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for openrouter-llama-8b: Error: Meta Llama 3.1 8B (Free) 404: {"error":{"message":"No endpoints found for meta-llama/llama-3.1-8b-instruct:free.","code":404},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for openrouter-llama-8b: Error: Meta Llama 3.1 8B (Free) 404: {"error":{"message":"No endpoints found for meta-llama/llama-3.1-8b-instruct:free.","code":404},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[AI] âœ“ Ollama Gemini 3 Flash responded (4153ms, 2 chars)
[LatencyTest] Failed for openrouter-mistral-7b: Error: Mistral 7B (Free) 404: {"error":{"message":"No endpoints found for mistralai/mistral-7b-instruct:free.","code":404},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[AI] âœ“ Ollama Gemini 3 Flash responded (4176ms, 2 chars)
[LatencyTest] Failed for openrouter-mistral-7b: Error: Mistral 7B (Free) 404: {"error":{"message":"No endpoints found for mistralai/mistral-7b-instruct:free.","code":404},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[AI] âœ“ Moonshot Kimi 2.5 responded (2513ms, 2 chars)
[LatencyTest] Failed for openrouter-phi-3: Error: Microsoft Phi-3 Medium (Free) 404: {"error":{"message":"No endpoints found for microsoft/phi-3-medium-128k-instruct:free.","code":404},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for moonshot-kimi: Error: Moonshot Kimi 2.5: message.content is empty after trim
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for openrouter-phi-3: Error: Microsoft Phi-3 Medium (Free) 404: {"error":{"message":"No endpoints found for microsoft/phi-3-medium-128k-instruct:free.","code":404},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[Hot Reload] File changed: C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\public\js\core\module-registry.js
[Hot Reload] Client disconnected
[Hot Reload] Client disconnected
[Hot Reload] Client connected
[Hot Reload] Client connected
[AI] âœ“ Google Gemini 2.5 Flash responded (1086ms, 2 chars)
[AI] âœ“ Ollama GPT-OSS 20B responded (1144ms, 2 chars)
[AI] âœ“ Groq Llama 3.3 70B responded (178ms, 2 chars)
[AI] âœ“ Groq Llama 3.1 8B Instant responded (147ms, 2 chars)
[AI] âœ“ Ollama Gemini 3 Flash responded (1939ms, 2 chars)
[Hot Reload] File changed: C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\public\js\core\module-registry.js
[Hot Reload] Client disconnected
[Hot Reload] Client disconnected
[Hot Reload] Client connected
[Hot Reload] Client connected
[AI] âœ“ Google Gemini 2.5 Flash responded (1046ms, 2 chars)
[AI] âœ“ Ollama GPT-OSS 20B responded (1140ms, 2 chars)
[AI] âœ“ Groq Llama 3.3 70B responded (180ms, 2 chars)
[AI] âœ“ Groq Llama 3.1 8B Instant responded (152ms, 2 chars)
[AI] âœ“ Ollama Gemini 3 Flash responded (1910ms, 2 chars)
API call failed: GET /api/settings Request failed with status code 401
[Knowledge] Failed to refresh settings cache: API Error: No token provided (http://localhost:5000/api/settings â†’ 401 Unauthorized)
[Hot Reload] Client disconnected
[Hot Reload] Client connected
[AI] âœ“ Google Gemini 2.5 Flash responded (925ms, 2 chars)
[AI] âœ“ Google Gemini 2.5 Flash responded (1122ms, 2 chars)
[AI] âœ“ Groq Llama 3.3 70B responded (181ms, 2 chars)
[AI] âœ“ Groq Llama 3.3 70B responded (177ms, 2 chars)
[AI] âœ“ Ollama GPT-OSS 20B responded (854ms, 2 chars)
[AI] âœ“ Ollama GPT-OSS 20B responded (1070ms, 2 chars)
[AI] âœ“ Groq Llama 3.1 8B Instant responded (143ms, 2 chars)
[AI] âœ“ Groq Llama 3.1 8B Instant responded (144ms, 2 chars)
[AI] âœ“ Ollama DeepSeek V3.2 responded (3299ms, 2 chars)
[LatencyTest] Failed for ollama-deepseek-v3.2: Error: Ollama DeepSeek V3.2: message.content is empty after trim
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[AI] âœ“ Ollama Qwen3 80B responded (3746ms, 2 chars)
[LatencyTest] Failed for ollama-qwen3-80b: Error: Ollama Qwen3 80B: message.content is empty after trim
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.t7:23:40 am [tsx] change in ./src\assistant\memory-writer.ts Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:48048) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (3933ms)
[Feedback] âœ… Settings loaded from database
7:25:56 am [tsx] change in ./src\assistant\escalation.ts Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:37312) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (5700ms)
[Feedback] âœ… Settings loaded from database
7:33:28 am [tsx] change in ./src\assistant\conversation-logger.ts Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:43996) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
7:33:43 am [tsx] change in ./src\assistant\conversation-logger.ts Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:37412) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (4023ms)
[Feedback] âœ… Settings loaded from database
8:08:17 am [tsx] change in ./src\index.ts Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[KnowledgeBase] Loaded 33 KB files from .rainbow-kb/
[KnowledgeBase] Watching .rainbow-kb/ for changes
[KnowledgeBase] Watching .rainbow-kb/memory/ for changes
[Startup] KnowledgeBase initialized
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:43904) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (4569ms)
[Feedback] âœ… Settings loaded from database
8:08:37 am [tsx] change in ./src\index.ts Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[KnowledgeBase] Loaded 33 KB files from .rainbow-kb/
[KnowledgeBase] Watching .rainbow-kb/ for changes
[KnowledgeBase] Watching .rainbow-kb/memory/ for changes
[Startup] KnowledgeBase initialized
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:40320) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (3752ms)
[Feedback] âœ… Settings loaded from database
8:09:00 am [tsx] change in ./src\routes\admin\intent-analytics.ts Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...

<--- Last few GCs --->

[46268:000001D4D7A7A000]    10034 ms: Scavenge 57.1 (74.1) -> 47.0 (77.3) MB, pooled: 0 MB, 36.76 / 0.00 ms  (average mu = 0.997, current mu = 0.997) allocation failure; 
[46268:000001D4D7A7A000]    10594 ms: Scavenge 62.9 (79.8) -> 53.8 (115.1) MB, pooled: 0 MB, 5.92 / 0.00 ms  (average mu = 0.997, current mu = 0.997) allocation failure; 

FATAL ERROR: Zone Allocation failed - process out of memory
----- Native stack trace -----

 1: 00007FF638E58B89 
 2: 00007FF639A96FF7 
 3: 00007FF639411D06 
 4: 00007FF638FD54C8 
 5: 00007FF63A7E2D85 
 6: 00007FF63A7E41CF 
 7: 00007FF63A7E4025 
 8: 00007FF63A7E3F02 
 9: 00007FF63A7DD8E4 
10: 00007FF63A7E339E 
11: 00007FF63A7D9037 
12: 00007FF63A7D651C 
13: 00007FF63A7D579F 
14: 00007FF63A7D559E 
15: 00007FF63A4731E6 
16: 00007FF63A46A2FB 
17: 00007FF63A469760 
18: 00007FF639A0AC7F 
19: 00007FF6399CFD0D 
20: 00007FF6399CFA05 
21: 00007FF63A267F1F 
22: 00007FF638DAADCE 
23: 00007FF639AEC366 
24: 00007FF63AD2C1B3 
25: 00007FFAF28F7374 
26: 00007FFAF48FCC91 
8:11:40 am [tsx] change in ./..\shared\schema-tables.ts Rerunning...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[KnowledgeBase] Loaded 33 KB files from .rainbow-kb/
[KnowledgeBase] Watching .rainbow-kb/ for changes
[KnowledgeBase] Watching .rainbow-kb/memory/ for changes
[Startup] KnowledgeBase initialized
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:10328) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (4481ms)
[Feedback] âœ… Settings loaded from database
8:12:50 am [tsx] change in ./src\assistant\conversation-logger.ts Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[KnowledgeBase] Loaded 33 KB files from .rainbow-kb/
[KnowledgeBase] Watching .rainbow-kb/ for changes
[KnowledgeBase] Watching .rainbow-kb/memory/ for changes
[Startup] KnowledgeBase initialized
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:7864) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (4755ms)
[Feedback] âœ… Settings loaded from database
8:21:24 am [tsx] change in ./src\assistant\conversation-logger.ts Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[KnowledgeBase] Loaded 33 KB files from .rainbow-kb/
[KnowledgeBase] Watching .rainbow-kb/ for changes
[KnowledgeBase] Watching .rainbow-kb/memory/ for changes
[Startup] KnowledgeBase initialized
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:40048) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (5224ms)
[Feedback] âœ… Settings loaded from database
[KnowledgeBase] Memory file changed: 2026-02-10.md, reloading...
[KnowledgeBase] Reloaded memory/2026-02-10.md
[KnowledgeBase] Memory file changed: 2026-02-11.md, reloading...
[KnowledgeBase] Reloaded memory/2026-02-11.md
[KnowledgeBase] Memory file changed: 2026-02-12.md, reloading...
[KnowledgeBase] Reloaded memory/2026-02-12.md
[KnowledgeBase] Memory file changed: 2026-02-13.md, reloading...
[KnowledgeBase] Reloaded memory/2026-02-13.md
8:42:48 am [tsx] change in ./src\lib\baileys-client.ts Restarting...
c
node:internal/modules/run_main:107
    triggerUncaughtException(
    ^
Error [TransformError]: Transform failed with 1 error:
C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\lib\whatsapp\index.ts:87:9: ERROR: Multiple exports with the same name "formatPhoneNumber"
    at failureErrorWithLog (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:1467:15)
    at C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:736:50
    at responseCallbacks.<computed> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:603:9)
    at handleIncomingPacket (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:658:12)
    at Socket.readFromStdout (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:581:7)
    at Socket.emit (node:events:508:28)
    at addChunk (node:internal/streams/readable:559:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
    at Readable.push (node:internal/streams/readable:390:5)
    at Pipe.onStreamRead (node:internal/stream_base_commons:189:23)

Node.js v24.7.0
r version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (5877ms)
[Feedback] âœ… Settings loaded from database
8:21:23 am [tsx] change in ./src\assistant\conversation-logger.ts Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[KnowledgeBase] Loaded 33 KB files from .rainbow-kb/
[KnowledgeBase] Watching .rainbow-kb/ for changes
[KnowledgeBase] Watching .rainbow-kb/memory/ for changes
[Startup] KnowledgeBase initialized
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:36500) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (5089ms)
[Feedback] âœ… Settings loaded from database
[KnowledgeBase] Memory file changed: 2026-02-10.md, reloading...
[KnowledgeBase] Reloaded memory/2026-02-10.md
[KnowledgeBase] Memory file changed: 2026-02-11.md, reloading...
[KnowledgeBase] Reloaded memory/2026-02-11.md
[KnowledgeBase] Memory file changed: 2026-02-12.md, reloading...
[KnowledgeBase] Reloaded memory/2026-02-12.md
[KnowledgeBase] Memory file changed: 2026-02-13.md, reloading...
[KnowledgeBase] Reloaded memory/2026-02-13.md
8:42:48 am [tsx] change in ./src\lib\baileys-client.ts Restarting...
c
node:internal/modules/run_main:107
    triggerUncaughtException(
    ^
Error [TransformError]: Transform failed with 1 error:
C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\lib\whatsapp\index.ts:87:9: ERROR: Multiple exports with the same name "formatPhoneNumber"
    at failureErrorWithLog (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:1467:15)
    at C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:736:50
    at responseCallbacks.<computed> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:603:9)
    at handleIncomingPacket (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:658:12)
    at Socket.readFromStdout (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:581:7)
    at Socket.emit (node:events:508:28)
    at addChunk (node:internal/streams/readable:559:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
    at Readable.push (node:internal/streams/readable:390:5)
    at Pipe.onStreamRead (node:internal/stream_base_commons:189:23)

Node.js v24.7.0
ter (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (5619ms)
[Feedback] âœ… Settings loaded from database
8:21:24 am [tsx] change in ./src\assistant\conversation-logger.ts Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[KnowledgeBase] Loaded 33 KB files from .rainbow-kb/
[KnowledgeBase] Watching .rainbow-kb/ for changes
[KnowledgeBase] Watching .rainbow-kb/memory/ for changes
[Startup] KnowledgeBase initialized
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:20512) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (5416ms)
[Feedback] âœ… Settings loaded from database
[KnowledgeBase] Memory file changed: 2026-02-10.md, reloading...
[KnowledgeBase] Reloaded memory/2026-02-10.md
[KnowledgeBase] Memory file changed: 2026-02-11.md, reloading...
[KnowledgeBase] Reloaded memory/2026-02-11.md
[KnowledgeBase] Memory file changed: 2026-02-12.md, reloading...
[KnowledgeBase] Reloaded memory/2026-02-12.md
[KnowledgeBase] Memory file changed: 2026-02-13.md, reloading...
[KnowledgeBase] Reloaded memory/2026-02-13.md
8:42:48 am [tsx] change in ./src\lib\baileys-client.ts Restarting...
c
node:internal/modules/run_main:107
    triggerUncaughtException(
    ^
Error [TransformError]: Transform failed with 1 error:
C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\lib\whatsapp\index.ts:87:9: ERROR: Multiple exports with the same name "formatPhoneNumber"
    at failureErrorWithLog (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:1467:15)
    at C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:736:50
    at responseCallbacks.<computed> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:603:9)
    at handleIncomingPacket (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:658:12)
    at Socket.readFromStdout (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:581:7)
    at Socket.emit (node:events:508:28)
    at addChunk (node:internal/streams/readable:559:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
    at Readable.push (node:internal/streams/readable:390:5)
    at Pipe.onStreamRead (node:internal/stream_base_commons:189:23)

Node.js v24.7.0
12:08.264Z","pid":4032,"hostname":"DESKTOP-I3D1826","class":"baileys","msg":"Connection is now AwaitingInitialSync, buffering events"}
{"level":30,"time":"2026-02-15T00:12:08.264Z","pid":4032,"hostname":"DESKTOP-I3D1826","class":"baileys","msg":"History sync is enabled, awaiting notification with a 20s timeout."}
{"level":30,"time":"2026-02-15T00:12:08.561Z","pid":4032,"hostname":"DESKTOP-I3D1826","class":"baileys","msg":"opened connection to WA"}
[Baileys:default] Connected: Pelangi Capsule Hostel (60103084289)
{"level":30,"time":"2026-02-15T00:12:08.572Z","pid":4032,"hostname":"DESKTOP-I3D1826","class":"baileys","myPN":"60103084289:2@s.whatsapp.net","myLID":"223008241221697:2@lid","msg":"Own LID session created successfully"}
Closing session: SessionEntry {
  _chains: {
    'BVuM6lp6AM6TOnS9ldXpJH6aZCBz+RR2XALCsd4YWKA1': { chainKey: [Object], chainType: 1, messageKeys: {} }
  },
  registrationId: 1492403188,
  currentRatchet: {
    ephemeralKeyPair: {
      pubKey: <Buffer 05 5b 8c ea 5a 7a 00 ce 93 3a 74 bd 95 d5 e9 24 7e 9a 64 20 73 f9 14 76 5c 02 c2 b1 de 18 58 a0 35>,
      privKey: <Buffer 90 1d 4f 55 f3 ae d3 73 31 23 48 9e a1 f5 27 ae ca a9 a3 01 a9 44 90 03 e8 56 21 33 36 e2 83 6d>
    },
    lastRemoteEphemeralKey: <Buffer 05 87 4c b8 b2 bb f4 70 0c 1b e3 42 05 b3 a8 27 e4 2d 85 a4 fc 69 71 4c 55 f6 f3 18 50 b3 bb 29 25>,
    previousCounter: 0,
    rootKey: <Buffer c1 b5 3e 08 bf 79 cd f3 8e 27 0e 36 19 c0 6a 0f ed 96 47 93 c2 e4 d2 ad e5 ea 59 89 0d 6f fd 5d>
  },
  indexInfo: {
    baseKey: <Buffer 05 e2 9e 93 b0 81 5b 2b 36 01 cd 77 8d 0d 7e 5e 00 94 c0 62 99 1d 75 a3 6b 50 08 87 a6 e2 1e c0 79>,
    baseKeyType: 1,
    closed: -1,
    used: 1771114170861,
    created: 1771114170861,
    remoteIdentityKey: <Buffer 05 5e 2b d8 d0 cf cc c5 99 0f 2e 74 0a 8d 4e 89 9e d2 9b f8 16 ad dc 36 09 f9 f5 93 de 24 cd 22 1a>
  },
  pendingPreKey: {
    signedKeyId: 5903047,
    baseKey: <Buffer 05 e2 9e 93 b0 81 5b 2b 36 01 cd 77 8d 0d 7e 5e 00 94 c0 62 99 1d 75 a3 6b 50 08 87 a6 e2 1e c0 79>,
    preKeyId: 93037
  }
}
Closing session: SessionEntry {
  _chains: {
    Baqr373RhmorK2Kds1HFB2YGCyzSsdms1D8DT3XN1PRN: { chainKey: [Object], chainType: 1, messageKeys: {} }
  },
  registrationId: 1422521383,
  currentRatchet: {
    ephemeralKeyPair: {
      pubKey: <Buffer 05 aa ab df bd d1 86 6a 2b 2b 62 9d b3 51 c5 07 66 06 0b 2c d2 b1 d9 ac d4 3f 03 4f 75 cd d4 f4 4d>,
      privKey: <Buffer d8 44 55 75 62 6d f0 48 df d9 a6 2a 7f 44 a5 51 33 a2 c0 e0 ea 03 d9 e9 35 e4 f4 37 aa 6a e6 7a>
    },
    lastRemoteEphemeralKey: <Buffer 05 89 58 28 35 0c 09 5b 7c bb 31 33 1e d5 2e 8d 45 bf 89 b0 33 8e d3 d5 4f 4e 95 95 cd 01 c7 c7 7c>,
    previousCounter: 0,
    rootKey: <Buffer a2 6c 28 65 b3 c1 9a 21 44 b4 29 01 6a 34 ea f3 ff 6d 3f 4c 8a 1c 82 c3 fb 65 df 5b 59 e4 46 de>
  },
  indexInfo: {
    baseKey: <Buffer 05 2a 3a 68 71 8a fa f9 71 d6 19 89 76 30 e3 59 4e 97 58 da 71 5b d2 ae a2 6d d5 6e 30 da 8e 26 4b>,
    baseKeyType: 1,
    closed: -1,
    used: 1771114170866,
    created: 1771114170866,
    remoteIdentityKey: <Buffer 05 bd bc a3 7c 69 c2 11 4d 2a 09 e8 ff a3 d8 7f af 63 30 ee d7 43 25 7a 25 86 ad 46 40 92 c0 66 17>
  },
  pendingPreKey: {
    signedKeyId: 3704918,
    baseKey: <Buffer 05 2a 3a 68 71 8a fa f9 71 d6 19 89 76 30 e3 59 4e 97 58 da 71 5b d2 ae a2 6d d5 6e 30 da 8e 26 4b>,
    preKeyId: 124185
  }
}
Removing old closed session: SessionEntry {
  _chains: {
    BY2hHsgIbg7fCwWfQTt2PljoD5oucfkiScinJAQDgfJa: { chainKey: [Object], chainType: 1, messageKeys: {} }
  },
  registrationId: 1492403188,
  currentRatchet: {
    ephemeralKeyPair: {
      pubKey: <Buffer 05 8d a1 1e c8 08 6e 0e df 0b 05 9f 41 3b 76 3e 58 e8 0f 9a 2e 71 f9 22 49 c8 a7 24 04 03 81 f2 5a>,
      privKey: <Buffer 90 4c 97 fa 99 60 0c e2 45 2c 64 fd 86 df e5 4d 4e 32 95 52 4a 36 2b 30 d6 55 c7 2b 93 3b c9 71>
    },
    lastRemoteEphemeralKey: <Buffer 05 87 4c b8 b2 bb f4 70 0c 1b e3 42 05 b3 a8 27 e4 2d 85 a4 fc 69 71 4c 55 f6 f3 18 50 b3 bb 29 25>,
    previousCounter: 0,
    rootKey: <Buffer d9 00 e3 fc 7f 6e 96 93 9a 86 2d 3a 36 c9 19 9b eb 3d 51 33 e7 98 f1 fa 66 84 12 ee bd 78 9e 6c>
  },
  indexInfo: {
    baseKey: <Buffer 05 2e ca 89 96 19 e8 8e c0 36 f1 73 8f d2 eb b0 55 94 e8 33 70 92 14 24 d1 4f 1f 6e 73 b2 bd 1a 47>,
    baseKeyType: 1,
    closed: 1771083339570,
    used: 1771083230790,
    created: 1771083230790,
    remoteIdentityKey: <Buffer 05 5e 2b d8 d0 cf cc c5 99 0f 2e 74 0a 8d 4e 89 9e d2 9b f8 16 ad dc 36 09 f9 f5 93 de 24 cd 22 1a>
  },
  pendingPreKey: {
    signedKeyId: 5903047,
    baseKey: <Buffer 05 2e ca 89 96 19 e8 8e c0 36 f1 73 8f d2 eb b0 55 94 e8 33 70 92 14 24 d1 4f 1f 6e 73 b2 bd 1a 47>,
    preKeyId: 93027
  }
}
Removing old closed session: SessionEntry {
  _chains: {
    'BaMGY90HDP/sOx5nDT4/E8BraLcAPToIFHOPvuhKLOkd': { chainKey: [Object], chainType: 1, messageKeys: {} }
  },
  registrationId: 1422521383,
  currentRatchet: {
    ephemeralKeyPair: {
      pubKey: <Buffer 05 a3 06 63 dd 07 0c ff ec 3b 1e 67 0d 3e 3f 13 c0 6b 68 b7 00 3d 3a 08 14 73 8f be e8 4a 2c e9 1d>,
      privKey: <Buffer a8 b6 81 e0 55 57 55 dd 7c 8e 98 b3 a4 6c 5f 4d 62 0e ed ca 94 16 55 88 a9 c0 d1 8f b9 bb 73 48>
    },
    lastRemoteEphemeralKey: <Buffer 05 89 58 28 35 0c 09 5b 7c bb 31 33 1e d5 2e 8d 45 bf 89 b0 33 8e d3 d5 4f 4e 95 95 cd 01 c7 c7 7c>,
    previousCounter: 0,
    rootKey: <Buffer 1f 73 79 f4 f9 4f 3a ef 2d 19 5a 1f 85 fe ac e5 3a 23 c7 02 77 80 c6 6f 69 29 0d a1 3b 0f e1 6d>
  },
  indexInfo: {
    baseKey: <Buffer 05 83 73 e7 cf 3e 8c 36 a4 fa ac ab cf 46 16 36 1b 6e 8c c8 64 de 61 6f fc 0a 7e 93 73 35 36 17 3c>,
    baseKeyType: 1,
    closed: 1771083339577,
    used: 1771083230797,
    created: 1771083230797,
    remoteIdentityKey: <Buffer 05 bd bc a3 7c 69 c2 11 4d 2a 09 e8 ff a3 d8 7f af 63 30 ee d7 43 25 7a 25 86 ad 46 40 92 c0 66 17>
  },
  pendingPreKey: {
    signedKeyId: 3704918,
    baseKey: <Buffer 05 83 73 e7 cf 3e 8c 36 a4 fa ac ab cf 46 16 36 1b 6e 8c c8 64 de 61 6f fc 0a 7e 93 73 35 36 17 3c>,
    preKeyId: 122238
  }
}
[Baileys:default] Sent to 60127088789@s.whatsapp.net: ðŸ”„ *Rainbow MCP Server Started*

Time: 15/02/2026, 8:12:12 a...
[AdminNotifier] Sent server startup notification to +60127088789 (1/3 today)
[Hot Reload] Client disconnected
[Hot Reload] Client connected
{"level":40,"time":"2026-02-15T00:12:28.273Z","pid":4032,"hostname":"DESKTOP-I3D1826","class":"baileys","msg":"Timeout in AwaitingInitialSync, forcing state to Online and flushing buffer"}
[AI] âœ“ Google Gemini 2.5 Flash responded (1117ms, 2 chars)
[AI] âœ“ Ollama Gemini 3 Flash responded (1854ms, 2 chars)
[AI] âœ“ Ollama GPT-OSS 20B responded (994ms, 2 chars)
[AI] âœ“ Groq Llama 3.3 70B responded (219ms, 2 chars)
[AI] âœ“ Groq Llama 3.1 8B Instant responded (147ms, 2 chars)
8:12:50 am [tsx] change in ./src\assistant\conversation-logger.ts Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[KnowledgeBase] Loaded 33 KB files from .rainbow-kb/
[KnowledgeBase] Watching .rainbow-kb/ for changes
[KnowledgeBase] Watching .rainbow-kb/memory/ for changes
[Startup] KnowledgeBase initialized
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:32688) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (5309ms)
[Feedback] âœ… Settings loaded from database
8:21:24 am [tsx] change in ./src\assistant\conversation-logger.ts Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[KnowledgeBase] Loaded 33 KB files from .rainbow-kb/
[KnowledgeBase] Watching .rainbow-kb/ for changes
[KnowledgeBase] Watching .rainbow-kb/memory/ for changes
[Startup] KnowledgeBase initialized
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:7352) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (4845ms)
[Feedback] âœ… Settings loaded from database
[KnowledgeBase] Memory file changed: 2026-02-10.md, reloading...
[KnowledgeBase] Reloaded memory/2026-02-10.md
[KnowledgeBase] Memory file changed: 2026-02-11.md, reloading...
[KnowledgeBase] Reloaded memory/2026-02-11.md
[KnowledgeBase] Memory file changed: 2026-02-12.md, reloading...
[KnowledgeBase] Reloaded memory/2026-02-12.md
[KnowledgeBase] Memory file changed: 2026-02-13.md, reloading...
[KnowledgeBase] Reloaded memory/2026-02-13.md
8:42:48 am [tsx] change in ./src\lib\baileys-client.ts Restarting...
c
node:internal/modules/run_main:107
    triggerUncaughtException(
    ^
Error [TransformError]: Transform failed with 1 error:
C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\lib\whatsapp\index.ts:87:9: ERROR: Multiple exports with the same name "formatPhoneNumber"
    at failureErrorWithLog (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:1467:15)
    at C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:736:50
    at responseCallbacks.<computed> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:603:9)
    at handleIncomingPacket (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:658:12)
    at Socket.readFromStdout (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:581:7)
    at Socket.emit (node:events:508:28)
    at addChunk (node:internal/streams/readable:559:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
    at Readable.push (node:internal/streams/readable:390:5)
    at Pipe.onStreamRead (node:internal/stream_base_commons:189:23)

Node.js v24.7.0
atency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for moonshot-kimi: Error: Moonshot Kimi 2.5: message.content is empty after trim
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[LatencyTest] Failed for openrouter-phi-3: Error: Microsoft Phi-3 Medium (Free) 404: {"error":{"message":"No endpoints found for microsoft/phi-3-medium-128k-instruct:free.","code":404},"user_id":"user_2UjjPyZtfAYE72tgp0t78xF2M4v"}
    at <anonymous> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\test\latency.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[Hot Reload] File changed: C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\public\js\modules\autotest-ui.js
[Hot Reload] Client disconnected
[Hot Reload] Client disconnected
[Hot Reload] Client connected
[Hot Reload] Client connected
[AI] âœ“ Google Gemini 2.5 Flash responded (1081ms, 2 chars)
[AI] âœ“ Ollama Gemini 3 Flash responded (1752ms, 2 chars)
[AI] âœ“ Ollama GPT-OSS 20B responded (795ms, 2 chars)
[AI] âœ“ Groq Llama 3.3 70B responded (179ms, 2 chars)
[AI] âœ“ Groq Llama 3.1 8B Instant responded (144ms, 3 chars)
[Hot Reload] File changed: C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\public\js\legacy-functions.js
[Hot Reload] Client disconnected
[Hot Reload] Client disconnected
[Hot Reload] Client connected
[Hot Reload] Client connected
[AI] âœ“ Google Gemini 2.5 Flash responded (984ms, 2 chars)
[AI] âœ“ Ollama Gemini 3 Flash responded (2529ms, 2 chars)
[AI] âœ“ Ollama GPT-OSS 20B responded (867ms, 2 chars)
[AI] âœ“ Groq Llama 3.3 70B responded (191ms, 2 chars)
[AI] âœ“ Groq Llama 3.1 8B Instant responded (145ms, 2 chars)
[Hot Reload] File changed: C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\public\js\legacy-functions.js
[Hot Reload] Client disconnected
[Hot Reload] Client disconnected
[Hot Reload] Client connected
[Hot Reload] Client connected
[AI] âœ“ Google Gemini 2.5 Flash responded (1544ms, 2 chars)
[AI] âœ“ Ollama Gemini 3 Flash responded (1714ms, 2 chars)
[AI] âœ“ Ollama GPT-OSS 20B responded (870ms, 2 chars)
[AI] âœ“ Groq Llama 3.3 70B responded (192ms, 2 chars)
[AI] âœ“ Groq Llama 3.1 8B Instant responded (147ms, 2 chars)
[Hot Reload] File changed: C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\public\js\legacy-functions.js
[Hot Reload] Client disconnected
[Hot Reload] Client disconnected
[Hot Reload] Client connected
[Hot Reload] Client connected
[AI] âœ“ Google Gemini 2.5 Flash responded (1063ms, 2 chars)
[AI] âœ“ Ollama Gemini 3 Flash responded (2260ms, 2 chars)
[AI] âœ“ Ollama GPT-OSS 20B responded (825ms, 2 chars)
[AI] âœ“ Groq Llama 3.3 70B responded (182ms, 2 chars)
[AI] âœ“ Groq Llama 3.1 8B Instant responded (142ms, 2 chars)
API call failed: GET /api/settings Request failed with status code 401
[Knowledge] Failed to refresh settings cache: API Error: No token provided (http://localhost:5000/api/settings â†’ 401 Unauthorized)
[Hot Reload] File changed: C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\public\js\legacy-functions.js
[Hot Reload] Client disconnected
[Hot Reload] Client disconnected
[Hot Reload] Client connected
[Hot Reload] Client connected
[AI] âœ“ Google Gemini 2.5 Flash responded (1080ms, 2 chars)
[AI] âœ“ Ollama Gemini 3 Flash responded (1933ms, 2 chars)
[AI] âœ“ Ollama GPT-OSS 20B responded (819ms, 2 chars)
[AI] âœ“ Groq Llama 3.3 70B responded (206ms, 2 chars)
[AI] âœ“ Groq Llama 3.1 8B Instant responded (145ms, 2 chars)
[Hot Reload] Client disconnected
[Hot Reload] Client connected
[AI] âœ“ Google Gemini 2.5 Flash responded (1063ms, 2 chars)
[AI] âœ“ Ollama Gemini 3 Flash responded (2045ms, 2 chars)
[AI] âœ“ Ollama GPT-OSS 20B responded (969ms, 2 chars)
[AI] âœ“ Groq Llama 3.3 70B responded (186ms, 2 chars)
[AI] âœ“ Groq Llama 3.1 8B Instant responded (149ms, 2 chars)
7:33:28 am [tsx] change in ./src\assistant\conversation-logger.ts Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:45448) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
7:33:44 am [tsx] change in ./src\assistant\conversation-logger.ts Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:18224) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (3756ms)
[Feedback] âœ… Settings loaded from database
8:08:17 am [tsx] change in ./src\index.ts Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
8:08:37 am [tsx] change in ./src\index.ts Rerunning...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[KnowledgeBase] Loaded 33 KB files from .rainbow-kb/
[KnowledgeBase] Watching .rainbow-kb/ for changes
[KnowledgeBase] Watching .rainbow-kb/memory/ for changes
[Startup] KnowledgeBase initialized
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:25664) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[Hot Reload] Enabled - watching for changes...
Pelangi MCP Server running on http://0.0.0.0:3002
MCP endpoint: http://0.0.0.0:3002/mcp
Health check: http://0.0.0.0:3002/health
API URL: http://localhost:5000
PelangiManager API reachable
[DB] âœ… Database connection established (3906ms)
[Feedback] âœ… Settings loaded from database
[Hot Reload] Client connected
[Hot Reload] Client connected
[Hot Reload] File changed: C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\public\css\rainbow-styles.css
[Hot Reload] Client disconnected
[Hot Reload] Client disconnected
[Hot Reload] Client connected
[Feedback Settings] âœ… Initialized defaults
[Hot Reload] Client connected
[Admin Notifications] âœ… Initialized defaults
[Baileys:default] Loaded 7 LIDâ†’phone mappings from auth state
[BaileysSupervisor] WhatsApp (Baileys) initializing...
[32m[08:08:56] [AdminNotifications] âœ… Initialized[39m
[Assistant] WhatsApp not connected yet â€” handler will be registered for when it connects
[ConfigStore] âœ… All config files loaded and validated
[AI] Provider "Google Gemini 2.5 Flash" (priority 0) â€” ready
[AI] Provider "Ollama Gemini 3 Flash" (priority 1) â€” ready
[AI] Provider "Ollama GPT-OSS 20B" (priority 2) â€” ready
[AI] Provider "Groq Llama 3.3 70B" (priority 3) â€” ready
[AI] Provider "Groq Llama 3.1 8B Instant" (priority 4) â€” ready
[KnowledgeBase] Loaded 33 KB files from .rainbow-kb/
[KnowledgeBase] Watching .rainbow-kb/ for changes
[KnowledgeBase] Watching .rainbow-kb/memory/ for changes
[StatePersistence] Database available â€” state will be persisted
[Intents] Loaded 18 emergency patterns from regex-patterns.json (by language)
[Intents] Fuzzy matcher initialized with 81 keyword groups
[IntentConfig] Built threshold maps: 35 intents, 0 T2 overrides, 0 T3 overrides
[Semantic] Initializing embedding model...
[Intents] Hybrid mode: Emergency â†’ Fuzzy â†’ Semantic â†’ LLM
[Semantic] Model loaded in 303ms
[Semantic] Computing intent embeddings...
[Semantic] Computed 27 intent embeddings in 3056ms
[Intents] Semantic matcher ready: 27 intents, 838 examples
{"level":30,"time":"2026-02-15T00:08:59.717Z","pid":25664,"hostname":"DESKTOP-I3D1826","class":"baileys","browser":["PelangiManager","Chrome","1.0.0"],"helloMsg":{"clientHello":{"ephemeral":"XAGNfWLnf+oMkiGrrW3S7z4CqumRTUxsaPz4E3LklSs="}},"msg":"connected to WA"}
[StatePersistence] Loaded 0 active conversation state(s) from DB
[WhatsAppManager] Message handler registered
[Assistant] WhatsApp AI Assistant ready
[BaileysSupervisor] Pelangi Assistant initialized â€” WhatsApp auto-reply active
Daily report scheduled for 11:30 AM MYT
API call failed: GET /api/settings Request failed with status code 401
[Knowledge] Failed to refresh settings cache: API Error: No token provided (http://localhost:5000/api/settings â†’ 401 Unauthorized)
{"level":30,"time":"2026-02-15T00:08:59.976Z","pid":25664,"hostname":"DESKTOP-I3D1826","class":"baileys","node":{"username":"60103084289","passive":true,"userAgent":{"platform":"WEB","appVersion":{"primary":2,"secondary":3000,"tertiary":1027934701},"mcc":"000","mnc":"000","osVersion":"0.1","device":"Desktop","osBuildNumber":"0.1","releaseChannel":"RELEASE","localeLanguageIso6391":"en","localeCountryIso31661Alpha2":"US"},"webInfo":{"webSubPlatform":"WEB_BROWSER"},"connectType":"WIFI_UNKNOWN","connectReason":"USER_ACTIVATED","device":2,"pull":true,"lidDbMigrated":false},"msg":"logging in..."}
[Hot Reload] File changed: C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\routes\admin\intent-analytics.ts
[Hot Reload] Client disconnected
8:09:00 am [tsx] change in ./src\routes\admin\intent-analytics.ts Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...

<--- Last few GCs --->

[15556:0000015BE61FA000]     8850 ms: Scavenge 52.9 (71.4) -> 44.0 (73.1) MB, pooled: 0 MB, 2.81 / 0.00 ms  (average mu = 0.999, current mu = 0.999) task; 
[15556:0000015BE61FA000]    10352 ms: Scavenge 59.0 (75.7) -> 48.4 (78.7) MB, pooled: 0 MB, 65.97 / 0.00 ms  (average mu = 0.999, current mu = 0.999) allocation failure; 
[15556:0000015BE61FA000]    10955 ms: Scavenge 64.4 (81.1) -> 55.0 (115.9) MB, pooled: 0 MB, 74.09 / 0.00 ms  (average mu = 0.999, current mu = 0.999) allocation failure; 

FATAL ERROR: MarkCompactCollector: young object promotion failed Allocation failed - JavaScript heap out of memory
----- Native stack trace -----

 1: 00007FF638E58B89 
 2: 00007FF639A96FF7 
 3: 00007FF6398978A7 
 4: 00007FF6398771BE 
 5: 00007FF63986C87D 
 6: 00007FF63986C52C 
 7: 00007FF63986C171 
 8: 00007FF63987E668 
 9: 00007FF63A267F1F 
10: 00007FF638DAADCE 
11: 00007FF639AEC366 
12: 00007FF63AD2C1B3 
13: 00007FFAF28F7374 
14: 00007FFAF48FCC91 
8:11:40 am [tsx] change in ./..\shared\schema-tables.ts Rerunning...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[KnowledgeBase] Loaded 33 KB files from .rainbow-kb/
[KnowledgeBase] Watching .rainbow-kb/ for changes
[KnowledgeBase] Watching .rainbow-kb/memory/ for changes
[Startup] KnowledgeBase initialized
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:32568) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (3944ms)
[Feedback] âœ… Settings loaded from database
8:12:50 am [tsx] change in ./src\assistant\conversation-logger.ts Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[KnowledgeBase] Loaded 33 KB files from .rainbow-kb/
[KnowledgeBase] Watching .rainbow-kb/ for changes
[KnowledgeBase] Watching .rainbow-kb/memory/ for changes
[Startup] KnowledgeBase initialized
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:9448) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (5758ms)
[Feedback] âœ… Settings loaded from database
8:21:23 am [tsx] change in ./src\assistant\conversation-logger.ts Restarting...
c[DB] Connection string loaded: postgresql://neondb_owner:***@ep-ancient-forest-aeh28zhu-poo...
[IntentConfig] Configuration updated: {
  tiers: {
    tier1_emergency: { enabled: false, contextMessages: 0 },
    tier2_fuzzy: { enabled: false, contextMessages: 3, threshold: 0.8 },
    tier3_semantic: { enabled: false, contextMessages: 5, threshold: 0.67 },
    tier4_llm: { enabled: true, contextMessages: 5 }
  },
  conversationState: {
    trackLastIntent: true,
    trackSlots: true,
    maxHistoryMessages: 20,
    contextTTL: 30
  }
}
[IntentConfig] Loaded tiers from C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\assistant\data\intent-tiers.json
[KnowledgeBase] Loaded 33 KB files from .rainbow-kb/
[KnowledgeBase] Watching .rainbow-kb/ for changes
[KnowledgeBase] Watching .rainbow-kb/memory/ for changes
[Startup] KnowledgeBase initialized
[ConfigStore] âœ… All config files loaded and validated
[Startup] ConfigStore initialized successfully
(node:1532) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
[CRASH] Uncaught exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3002
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3002
}
[DB] âœ… Database connection established (5001ms)
[Feedback] âœ… Settings loaded from database
[KnowledgeBase] Memory file changed: 2026-02-10.md, reloading...
[KnowledgeBase] Reloaded memory/2026-02-10.md
[KnowledgeBase] Memory file changed: 2026-02-11.md, reloading...
[KnowledgeBase] Reloaded memory/2026-02-11.md
[KnowledgeBase] Memory file changed: 2026-02-12.md, reloading...
[KnowledgeBase] Reloaded memory/2026-02-12.md
[KnowledgeBase] Memory file changed: 2026-02-13.md, reloading...
[KnowledgeBase] Reloaded memory/2026-02-13.md
8:42:48 am [tsx] change in ./src\lib\baileys-client.ts Restarting...
c
node:internal/modules/run_main:107
    triggerUncaughtException(
    ^
Error [TransformError]: Transform failed with 1 error:
C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\src\lib\whatsapp\index.ts:87:9: ERROR: Multiple exports with the same name "formatPhoneNumber"
    at failureErrorWithLog (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:1467:15)
    at C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:736:50
    at responseCallbacks.<computed> (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:603:9)
    at handleIncomingPacket (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:658:12)
    at Socket.readFromStdout (C:\Users\Jyue\Desktop\Projects\PelangiManager-Zeabur\RainbowAI\node_modules\esbuild\lib\main.js:581:7)
    at Socket.emit (node:events:508:28)
    at addChunk (node:internal/streams/readable:559:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
    at Readable.push (node:internal/streams/readable:390:5)
    at Pipe.onStreamRead (node:internal/stream_base_commons:189:23)

Node.js v24.7.0
